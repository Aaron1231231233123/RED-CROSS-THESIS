<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Donor Interview</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f8f8;
            margin: 20px;
        }
        .form-container {
            display: grid;
            grid-template-columns: 0.5fr 4fr 1fr 1fr 3fr;
            gap: 5px;
            max-width: 54%;
            margin: auto;
            padding: 2%;
            background: white;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            font-weight: bold;
            text-align: center;
            background-color: #d32f2f;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }
        .bold {
            font-weight: bold;
            grid-column: span 5;
            background: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .cell {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
        }
        .number {
            text-align: center;
            font-weight: bold;
            justify-content: center;
        }
        .checkbox {
            text-align: center;
            justify-content: center;
        }
        input[type="checkbox"] {
            transform: scale(1.2);
        }
        input[type="text"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .title, .subtitle{
            margin-left: 22%;
        }
        .title {
            text-align: left;
            font-size: 200%;
            font-weight: bold;
            margin-bottom: 10px;
            
        }
        .subtitle {
            text-align: left;
            font-style: italic;
            margin-bottom: 20px;
        }
        /* Submit Button Section */
        .submit-section {
            grid-column: span 5;
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        .submit-button {
            background-color: #d9534f;
            color: white;
            font-weight: bold;
            padding: 12px 22px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-size: 15px;
        }

        .submit-button:hover {
            background-color: #c9302c;
            transform: translateY(-2px);
        }

        .submit-button:active {
            transform: translateY(0);
        }
       

        .blood-bag-option {
    display: flex;
    align-items: center;
    font-weight: bold;
    color: #721c24;
    gap: 8px;
    background: #fff;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
}

/* Hide the default radio */
.blood-bag-option input {
    opacity: 0;
    position: absolute;
}

/* Custom checkbox look */
.checkmark {
    width: 18px;
    height: 18px;
    background-color: #fff;
    border: 2px solid #000000;
    border-radius: 4px;
    display: inline-block;
    position: relative;
    transition: background-color 0.3s ease;
}

/* Change background when selected */
.blood-bag-option input:checked ~ .checkmark {
    background-color: #0559f5;
}

/* Checkmark tick */
.checkmark::after {
    content: "";
    position: absolute;
    display: none;
    left: 5px;
    top: 1px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

/* Show tick when selected */
.blood-bag-option input:checked ~ .checkmark::after {
    display: block;
}
.medical-history-remarks {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

         /* Loader Animation -- Modal Design */
         .loading-spinner {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 8px solid #ddd;
            border-top: 8px solid #a82020;
            animation: rotateSpinner 1s linear infinite;
            display: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
        }

        @keyframes rotateSpinner {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        /* Confirmation Modal */
        .confirmation-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            z-index: 9999;
            border-radius: 10px;
            width: 300px;
            display: none;
            opacity: 0;
        }

        /* Fade-in and Fade-out Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -55%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
            to {
                opacity: 0;
                transform: translate(-50%, -55%);
            }
        }

        .confirmation-modal.show {
            display: block;
            animation: fadeIn 0.3s ease-in-out forwards;
        }

        .confirmation-modal.hide {
            animation: fadeOut 0.3s ease-in-out forwards;
        }

        .modal-header {
            font-size: 18px;
            font-weight: bold;
            color: #d50000;
            margin-bottom: 15px;
        }

        .modal-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .modal-button {
            width: 45%;
            padding: 10px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .cancel-action {
            background: #aaa;
            color: white;
        }

        .cancel-action:hover {
            background: #888;
        }

        .confirm-action {
            background: #c9302c;
            color: white;
        }

        .confirm-action:hover {
            background: #691b19;
        }
    </style>
</head>
<body>
    <div class="title">II. Medical History</div>
    <div class="subtitle">Please read carefully and answer all relevant questions. Tick (check) the appropriate answer.</div>
    <div class="form-container">
        <div class="header">#</div>
        <div class="header">Question</div>
        <div class="header">Yes</div>
        <div class="header">No</div>
        <div class="header">Remarks</div>
        
        <script>
            const questions = [
                "Do you feel well and healthy today?",
                "Have you ever been refused as a blood donor or told not to donate blood for any reasons?",
                "Are you giving blood only because you want to be tested for HIV or the AIDS virus or Hepatitis virus?",
                "Are you aware that an HIV/Hepatitis infected person can still transmit the virus despite a negative HIV/Hepatitis test?",
                "Have you within the last 12 HOURS had taken liquor, beer or any drinks with alcohol?",
                "In the last 3 DAYS have you taken aspirin?",
                "In the past 4 WEEKS have you taken any medications and/or vaccinations?",
                "In the past 3 MONTHS have you donated whole blood, platelets or plasma?",
                "IN THE PAST 6 MONTHS HAVE YOU:",
                "Been to any places in the Philippines or countries infected with ZIKA Virus?",
                "Had sexual contact with a person who was confirmed to have ZIKA Virus Infection?",
                "Had sexual contact with a person who has been to any places in the Philippines or countries infected with ZIKA Virus?",
                "IN THE PAST 12 MONTHS HAVE YOU:",
                "Received blood, blood products and/or had tissue/organ transplant or graft?",
                "Had surgical operation or dental extraction?",
                "Had a tattoo applied, ear and body piercing, acupuncture, needle stick Injury or accidental contact with blood?",
                "Had sexual contact with high risks individuals or in exchange for material or monetary gain?",
                "Engaged in unprotected, unsafe or casual sex?",
                "Had jaundice/hepatitis/personal contact with person who had hepatitis?",
                "Been incarcerated, Jailed or imprisoned?",
                "Spent time or have relatives in the United Kingdom or Europe?",
                "HAVE YOU EVER:",
                "Travelled or lived outside of your place of residence or outside the Philippines?",
                "Taken prohibited drugs (orally, by nose, or by injection)?",
                "Used clotting factor concentrates?",
                "Had a positive test for the HIV virus, Hepatitis virus, Syphilis or Malaria?",
                "Had Malaria or Hepatitis in the past?",
                "Had or was treated for genital wart, syphilis, gonorrhea or other sexually transmitted diseases?",
                "HAD ANY OF THE FOLLOWING:",
                "Cancer, blood disease or bleeding disorder (haemophilia)?",
                "Heart disease/surgery, rheumatic fever or chest pains?",
                "Lung disease, tuberculosis or asthma?",
                "Kidney disease, thyroid disease, diabetes, epilepsy?",
                "Chicken pox and/or cold sores?",
                "Any other chronic medical condition or surgical operations?",
                "Have you recently had rash and/or fever? Was/were this/these also associated with arthralgia or arthritis or conjunctivitis?",
                "FOR FEMALE DONORS ONLY:",
                "Are you currently pregnant or have you ever been pregnant?",
                "When was your last childbirth?",
                "In the past 1 YEAR, did you have a miscarriage or abortion?",
                "Are you currently breastfeeding?",
                "When was your last menstrual period?"
            ];
            

            const remarksOptions = [
                "None", "Medical Condition", "Recent Travel", "Recent Illness",
                "Medication Taken", "Pregnancy", "Alcohol Consumption", "Tattoos/Piercings",
                "Blood Transfusion", "Other"
            ];
            
            let count = 1;
            questions.forEach(q => {
                if (q.includes(":")) {
                    document.write(`<div class='bold'>${q}</div>`);
                } else {
                    document.write(`<div class='cell number'>${count}</div>`);
                    document.write(`<div class='cell'>${q}</div>`);
                    document.write(`
                        <div class='cell checkbox'>
                            <label class="blood-bag-option">
                                <input type='radio' name='q${count}' value='Yes'>
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class='cell checkbox'>
                            <label class="blood-bag-option">
                                <input type='radio' name='q${count}' value='No'>
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    `);
            let selectHTML = `<select <option class="medical-history-remarks" name='q${count}_remarks'>`;
                remarksOptions.forEach(option => {
                    selectHTML += `<option value="${option}">${option}</option>`;
                });
                selectHTML += `</select>`;
                
                document.write(`<div class='cell'>${selectHTML}</div>`);
                count++;
                }
            });
        </script>
        <div class="submit-section">
            <button class="submit-button" id="triggerModalButton">Next</button>
        </div>
    </div>
    <!-- Confirmation Modal -->
    <div class="confirmation-modal" id="confirmationDialog">
        <div class="modal-header">Do you want to continue?</div>
        <div class="modal-actions">
            <button class="modal-button cancel-action" id="cancelButton">No</button>
            <button class="modal-button confirm-action" id="confirmButton">Yes</button>
        </div>
    </div>    

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner"></div>



    <script>

        let confirmationDialog = document.getElementById("confirmationDialog");
        let loadingSpinner = document.getElementById("loadingSpinner");
        let triggerModalButton = document.getElementById("triggerModalButton");
        let cancelButton = document.getElementById("cancelButton");
        let confirmButton = document.getElementById("confirmButton");

        // Open Modal
        triggerModalButton.addEventListener("click", function() {
            confirmationDialog.classList.remove("hide");
            confirmationDialog.classList.add("show");
            confirmationDialog.style.display = "block";
            triggerModalButton.disabled = true; // Disable button while modal is open
        });

        // Close Modal Function
        function closeModal() {
            confirmationDialog.classList.remove("show");
            confirmationDialog.classList.add("hide");
            setTimeout(() => {
                confirmationDialog.style.display = "none";
                triggerModalButton.disabled = false; // Re-enable button
            }, 300);
        }

        // Yes Button (Triggers Loading Spinner)
        confirmButton.addEventListener("click", function() {
            closeModal();
            loadingSpinner.style.display = "block"; // Show loader
            setTimeout(() => {
                loadingSpinner.style.display = "none"; // Hide loader after 2 seconds
                window.location.href = "screening-form.html";
            }, 2000);
        });

        // No Button (Closes Modal)
        cancelButton.addEventListener("click", function() {
            closeModal();
        });

    </script>
</body>
</html>